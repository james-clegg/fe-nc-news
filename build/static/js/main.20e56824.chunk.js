(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,a){e.exports={userProfileHeader:"UserProfilePage_userProfileHeader__1_xwf",userProfileFullName:"UserProfilePage_userProfileFullName__1gQru",userProfileImage:"UserProfilePage_userProfileImage__NSCoG",articleListFlex:"UserProfilePage_articleListFlex__IVoWr"}},13:function(e,t,a){e.exports={header:"HomePage_header__VkuQq",featuredListFlex:"HomePage_featuredListFlex__3AsMh"}},16:function(e,t,a){e.exports={articleCard:"ArticleCard_articleCard__3shQu",articleCardHeader:"ArticleCard_articleCardHeader__12OJb"}},17:function(e,t,a){e.exports={querySelectorLabel:"QuerySelectors_querySelectorLabel__1QCXj"}},19:function(e,t,a){e.exports={listOfArticlesHeader:"ListOfArticles_listOfArticlesHeader__3CaG3",articleListFlex:"ListOfArticles_articleListFlex__3sCWQ"}},34:function(e,t,a){e.exports={northcodersHeart:"NCheart_northcodersHeart__27pPX"}},36:function(e,t,a){e.exports=a(81)},41:function(e,t,a){},8:function(e,t,a){e.exports={commentSuccessMessage:"comments_commentSuccessMessage__x-6FP",commentFailureMessage:"comments_commentFailureMessage__3sdDP",commentItem:"comments_commentItem__1pahU",listOfComments:"comments_listOfComments__tTnW8",textOnCommentsPage:"comments_textOnCommentsPage__13C9I"}},81:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(18),s=a.n(c),o=a(1),l=a(2),i=a(4),m=a(3),u=a(5),d=(a(41),a(15)),f=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("h1",{className:"websiteHeader"},"Northcoders News"))},p=a(14),h=a(16),g=a.n(h),E=function(e){var t=e.article,a=t.title,r=t.author,c=t.topic,s=t.comment_count,o=t.article_id,l=t.created_at,i=t.votes;return n.a.createElement("section",{className:g.a.articleCardGrid},n.a.createElement("li",{className:g.a.articleCard},n.a.createElement(d.a,{to:"/articles/".concat(o)},n.a.createElement("h3",{className:g.a.articleCardHeader},a)),n.a.createElement("p",null,"Author: ",r),n.a.createElement("p",null,"Topic: ",c),n.a.createElement("p",null,"Comment count: ",s),n.a.createElement("p",null,"Votes: ",i),n.a.createElement("p",null,"Date posted: ",l.slice(0,9))))},b=a(17),_=a.n(b),v=function(e){return n.a.createElement(n.a.Fragment,null,n.a.createElement("label",{className:_.a.querySelectorLabel},"Sort_by:",n.a.createElement("select",{name:"sort_by",onChange:e.updateQueries},n.a.createElement("option",{value:"created_at"},"Date posted"),n.a.createElement("option",{value:"votes"},"Votes"),n.a.createElement("option",{value:"comment_count"},"Number of comments"))),n.a.createElement("label",{className:_.a.querySelectorLabel},"Order:",n.a.createElement("select",{name:"order",onChange:e.updateQueries},n.a.createElement("option",{value:"desc"},"Descending"),n.a.createElement("option",{value:"asc"},"Ascending"))),n.a.createElement("label",{className:_.a.querySelectorLabel},"Filter by topic:",n.a.createElement("select",{name:"filterByTopic",onChange:e.updateQueries},n.a.createElement("option",{value:""},"No filter"),n.a.createElement("option",{value:"coding"},"Coding"),n.a.createElement("option",{value:"football"},"Football"),n.a.createElement("option",{value:"cooking"},"Cooking"))))},O=a(32),y=a.n(O).a.create({baseURL:"https://jc-nc-news.herokuapp.com/api/"}),C=function(){return y.get("/articles").then(function(e){return e.data.articles})},A=function(e){var t=e.sort_by,a=e.order,r=e.filterByTopic,n=e.author;return y.get("/articles",{params:{sort_by:t,order:a,topic:r,author:n}}).then(function(e){return e.data.articles})},j=function(e,t){return y.patch("comments/".concat(e),{inc_votes:t})},N=function(e,t){return y.patch("articles/".concat(e),{inc_votes:t})},S=function(e){return y.get("/articles/".concat(e,"/comments")).then(function(e){return e.data.comments})},L=function(e){return y.get("/articles/".concat(e)).then(function(e){return e.data.article})},D=function(e,t,a){return y.post("/articles/".concat(a,"/comments"),{username:e,body:t}).then(function(e){return e.data.comment})},F=function(e){return y.delete("/comments/".concat(e)).then(function(e){return e})},w=function(e){return y.get("/users/".concat(e)).then(function(e){return e.data.user})},P=a(19),k=a.n(P),x=function(e){var t=e.error;return n.a.createElement("p",{className:"ErrorMessage"},"ERROR ",t.status," ",t.msg)},V=function(e){function t(){var e,a;Object(o.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(n)))).state={articles:[],sort_by:"created_at",filterByTopic:"",order:"desc",error:null},a.getAllTheArticles=function(){C().then(function(e){return a.setState({articles:e})}).catch(function(e){var t=e.response,r=t.data,n=t.status;a.setState({error:{status:n,msg:r.msg}})})},a.updateQueries=function(e){var t=e.target,r=t.name,n=t.value;a.setState(Object(p.a)({},r,n))},a.componentDidUpdate=function(e,t){var r=a.state,n=r.sort_by,c=r.filterByTopic,s=r.order;t.sort_by===n&&t.filterByTopic===c&&t.order===s||A({sort_by:n,order:s,filterByTopic:c}).then(function(e){return a.setState({articles:e})})},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return this.state.error?n.a.createElement(x,{error:this.state.error}):n.a.createElement(n.a.Fragment,null,n.a.createElement("p",{className:k.a.listOfArticlesHeader},"Articles"),n.a.createElement(v,{updateQueries:this.updateQueries}),n.a.createElement("section",{className:k.a.articleListFlex},this.state.articles.map(function(e){return n.a.createElement(E,{article:e,key:e.article_id})})))}},{key:"componentDidMount",value:function(){this.getAllTheArticles()}}]),t}(r.Component),T=a(13),I=a.n(T),H=function(e){return n.a.createElement("p",{className:I.a.header},"Welcome to Northcoders News, ",e.user,"!")},M=function(e){function t(){var e,a;Object(o.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(n)))).state={articles:"",isLoading:!0,error:null},a.getFeaturedArticles=function(){A({sort_by:"votes",order:"desc"}).then(function(e){a.setState({articles:e.slice(0,3),isLoading:!1})}).catch(function(e){var t=e.response,r=t.data,n=t.status;a.setState({error:{status:n,msg:r.msg},isLoading:!1})})},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state,t=e.articles,a=e.isLoading,r=e.error;return a?n.a.createElement("p",null,"Loading articles..."):r?n.a.createElement(x,{error:r}):n.a.createElement(n.a.Fragment,null,n.a.createElement("p",{className:I.a.header},"Featured articles:"),n.a.createElement("section",{className:I.a.featuredListFlex},t.map(function(e){return n.a.createElement(E,{article:e,key:e.article_id})})))}},{key:"componentDidMount",value:function(){this.getFeaturedArticles()}}]),t}(r.Component),U=function(e){return n.a.createElement(n.a.Fragment,null,n.a.createElement(H,{user:e.user,className:"websiteHeader"}),";",n.a.createElement(M,null))},Q=a(9),B=a.n(Q),q=function(e){function t(){var e,a;Object(o.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(n)))).state={article:"",incrementedVotes:0,error:null,isLoading:!0},a.getTheArticle=function(){L(a.props.id).then(function(e){a.setState({article:e,isLoading:!1})}).catch(function(e){var t=e.response,r=t.data,n=t.status;a.setState({error:{status:n,msg:r.msg},isLoading:!1})})},a.articleVoter=function(e,t){N(a.props.id,t),e+=t,a.setState({incrementedVotes:e})},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.state.article,a=t.author,r=t.title,c=t.body,s=t.created_at,o=t.comment_count,l=this.state.article.votes;return this.state.isLoading?n.a.createElement("p",null,"Loading..."):this.state.error?n.a.createElement(x,{error:this.state.error}):n.a.createElement(n.a.Fragment,null,n.a.createElement("section",{className:B.a.SingleArticle},n.a.createElement("h2",{className:B.a.SingleArticleTitle},r),n.a.createElement("p",{className:B.a.bodyOfArticle}," ",c),n.a.createElement("p",{className:B.a.votesOnArticle},"Votes: ",l+=this.state.incrementedVotes),n.a.createElement("p",{className:B.a.extraInfoOnArticle},"By: ",a),n.a.createElement("p",{className:B.a.extraInfoOnArticle},"Created on: ",s.slice(0,9)),n.a.createElement("p",{className:B.a.extraInfoOnArticle},"Number of comments: ",o),n.a.createElement("button",{onClick:function(){return e.articleVoter(e.state.incrementedVotes,1)},disabled:this.state.incrementedVotes>0},"Upvote article!"," ",n.a.createElement("span",{role:"img","aria-label":"up arrow"},"\u2b06\ufe0f")),n.a.createElement("button",{onClick:function(){return e.articleVoter(e.state.incrementedVotes,-1)},disabled:this.state.incrementedVotes<0},"Downvote article!"," ",n.a.createElement("span",{role:"img","aria-label":"down arrow"},"\u2b07\ufe0f"))))}},{key:"componentDidMount",value:function(){this.getTheArticle()}}]),t}(r.Component),R=a(35),W=a(8),G=a.n(W),J=function(e){function t(){var e,a;Object(o.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(n)))).state={incrementedVotes:0,error:null},a.commentVoter=function(e,t){j(a.props.comment.comment_id,t),e+=t,a.setState({incrementedVotes:e})},a.deleteComment=function(){var e=a.props.comment,t=e.comment_id,r=e.author;a.props.user===r?(F(t).catch(function(e){var t=e.response,r=t.data,n=t.status;a.setState({error:{status:n,msg:r.msg}})}),a.props.removeDeletedCommentFromArray(t)):a.props.refuseToDelete()},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.comment,a=t.author,r=t.body,c=t.created_at,s=this.props.comment.votes;return this.state.error?n.a.createElement(x,{error:this.state.error}):n.a.createElement("li",{className:G.a.commentItem},n.a.createElement("p",null," Author: ",a),n.a.createElement("p",null,r),n.a.createElement("p",null,"Created on: ",c.slice(0,9)),n.a.createElement("p",null,"Votes: ",s+=this.state.incrementedVotes),n.a.createElement("button",{onClick:function(){return e.commentVoter(e.state.incrementedVotes,1)},disabled:this.state.incrementedVotes>0},"Upvote comment!"," ",n.a.createElement("span",{role:"img","aria-label":"up arrow"},"\u2b06\ufe0f")," "),n.a.createElement("button",{onClick:function(){return e.commentVoter(e.state.incrementedVotes,-1)},disabled:this.state.incrementedVotes<0},"Downvote comment!"," ",n.a.createElement("span",{role:"img","aria-label":"down arrow"},"\u2b07\ufe0f")),n.a.createElement("button",{onClick:this.deleteComment},"Delete comment"))}}]),t}(r.Component),Z=function(e){function t(){var e,a;Object(o.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(n)))).state={comment:""},a.handleSubmit=function(e){e.preventDefault();var t=a.state.comment;a.props.addPostedComment(t),a.setState({comment:""})},a.handleChange=function(e){var t=e.target,r=t.name,n=t.value;a.setState(Object(p.a)({},r,n))},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("h3",{className:G.a.textOnCommentsPage},"Post a new comment:"),n.a.createElement("form",{onSubmit:this.handleSubmit},n.a.createElement("p",{className:G.a.textOnCommentsPage},"Comment: "),n.a.createElement("textarea",{rows:"10",cols:"80",name:"comment",onChange:this.handleChange,value:this.state.comment,required:!0}),n.a.createElement("button",null,"Submit!")))}}]),t}(r.Component),X=function(e){function t(){var e,a;Object(o.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(n)))).state={comments:"",isLoading:!0,didDelete:!1,failedDelete:!1,error:null},a.getTheComments=function(){S(a.props.id).then(function(e){a.setState({comments:e,isLoading:!1})}).catch(function(e){var t=e.response,r=t.data,n=t.status;a.setState({error:{status:n,msg:r.msg},isLoading:!1})})},a.addPostedComment=function(e){D(a.props.user,e,a.props.id).then(function(e){a.setState(function(t){return{comments:[e].concat(Object(R.a)(t.comments)),didDelete:!1,failedDelete:!1}})})},a.removeDeletedCommentFromArray=function(e){a.setState(function(t){return{comments:t.comments.filter(function(t){return t.comment_id!==e}),didDelete:!0,failedDelete:!1}})},a.refuseToDelete=function(){a.setState({failedDelete:!0,didDelete:!1})},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return this.state.isLoading?n.a.createElement("p",null,"Loading..."):this.state.error?n.a.createElement(x,{error:this.state.error}):n.a.createElement(n.a.Fragment,null,n.a.createElement("h2",{className:G.a.textOnCommentsPage},"Comments"),this.state.failedDelete&&n.a.createElement("p",{className:G.a.commentFailureMessage},"Could not delete comment as current user is not the author"),this.state.didDelete&&n.a.createElement("p",{className:G.a.commentSuccessMessage},"Comment was successfully deleted!"),n.a.createElement("ul",{className:G.a.listOfComments},this.state.comments.map(function(t){return n.a.createElement(J,{comment:t,id:e.props.id,key:t.comment_id,removeDeletedCommentFromArray:e.removeDeletedCommentFromArray,refuseToDelete:e.refuseToDelete,user:e.props.user})})),n.a.createElement(Z,{addPostedComment:this.addPostedComment,user:this.props.user}))}},{key:"componentDidMount",value:function(){this.getTheComments()}}]),t}(r.Component),z=function(e){return n.a.createElement(n.a.Fragment,null,n.a.createElement(q,{id:e.articleID}),n.a.createElement(X,{id:e.articleID,user:e.user}))},K=a(33),Y=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return n.a.createElement(K.slide,null,n.a.createElement("a",{id:"Home",className:"menu-item",href:"/"},"Home"),n.a.createElement("a",{id:"All articles",className:"menu-item",href:"/allArticles"},"All articles"),n.a.createElement("a",{id:"My Profile",className:"menu-item",href:"/users/".concat(this.props.username)},"My profile"))}}]),t}(r.Component),$=a(34),ee=a.n($),te=function(){return n.a.createElement("img",{src:"https://northcoders.com/images/icons/icon-nc-heart.png",alt:"Northcoders logo with a cartoon heart",className:ee.a.northcodersHeart})},ae=a(11),re=a.n(ae),ne=function(e){function t(){var e,a;Object(o.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(n)))).state={user:null,isLoading:!0,error:null},a.getInfoAboutUser=function(){w(a.props.username).then(function(e){return a.setState({user:e,isLoading:!1})}).catch(function(e){var t=e.response,r=t.data,n=t.status;a.setState({error:{status:n,msg:r.msg},isLoading:!1})})},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state,t=e.user,a=e.isLoading,r=e.error;return a?n.a.createElement("p",null,"Loading user..."):r?n.a.createElement(x,{error:r}):n.a.createElement("div",null,n.a.createElement("h1",{className:re.a.userProfileHeader},t.username),n.a.createElement("p",{className:re.a.userProfileFullName},"Full name: ",t.name),n.a.createElement("img",{className:re.a.userProfileImage,src:t.avatar_url,alt:t.username}))}},{key:"componentDidMount",value:function(){this.getInfoAboutUser()}}]),t}(r.Component),ce=function(e){function t(){var e,a;Object(o.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(n)))).state={articles:"",isLoading:!0,error:null},a.getArticlesByUser=function(){var e={author:a.props.username};A(e).then(function(e){a.setState({articles:e,isLoading:!1})}).catch(function(e){var t=e.response,r=t.data,n=t.status;a.setState({error:{status:n,msg:r.msg},isLoading:!1})})},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.articles,r=e.error;return t?n.a.createElement("p",null,"Loading articles..."):r?n.a.createElement(x,{error:r}):n.a.createElement("section",{className:re.a.articleListFlex},a.map(function(e){return n.a.createElement(E,{article:e,key:e.article_id})}))}},{key:"componentDidMount",value:function(){this.getArticlesByUser()}}]),t}(r.Component),se=function(e){return n.a.createElement(n.a.Fragment,null,n.a.createElement(ne,{username:e.username}),n.a.createElement(ce,{username:e.username}))},oe=function(e){function t(){var e,a;Object(o.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(n)))).state={user:"jessjelly"},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"App"},n.a.createElement(f,null),n.a.createElement(Y,{username:this.state.user}),n.a.createElement(te,null),n.a.createElement(d.b,null,n.a.createElement(x,{default:!0,error:{status:404,msg:"page not found"}}),n.a.createElement(U,{path:"/",user:this.state.user}),n.a.createElement(V,{path:"/allArticles"}),n.a.createElement(z,{path:"/articles/:articleID",user:this.state.user}),n.a.createElement(se,{path:"/users/:username"})))}}]),t}(r.Component);s.a.render(n.a.createElement(oe,null),document.getElementById("root"))},9:function(e,t,a){e.exports={bodyOfArticle:"SingleArticle_bodyOfArticle__2_lZR",extraInfoOnArticle:"SingleArticle_extraInfoOnArticle__Z2C0P",votesOnArticle:"SingleArticle_votesOnArticle__w7foc",SingleArticle:"SingleArticle_SingleArticle__1tMZi",SingleArticleTitle:"SingleArticle_SingleArticleTitle__2reCA"}}},[[36,1,2]]]);
//# sourceMappingURL=main.20e56824.chunk.js.map